(function(){angular.module("oxymoron.config.http",[]).config(["$httpProvider","$locationProvider","$stateProvider",function(e){e.defaults.headers.common["X-Requested-With"]="AngularXMLHttpRequest",e.defaults.paramSerializer="$httpParamSerializerJQLike"}]),angular.module("oxymoron.config.states",[]).config(["$locationProvider","$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider",function(e,t,r){e.html5Mode({enabled:!0,requireBase:!1}),r.rule(function(e,r){var n=r.path(),o="/"===n[n.length-1];if(t.oxymoron_location=r,o)return n.substr(0,n.length-1)});var n=function(e,t){return function(r,n){try{-1!=(r=angular.isArray(r)?r:[r]).indexOf(e)&&n(t)}catch(o){console.error(o)}}};t.rails=function(){return t.state("new_user_session_path",{url:"/users/sign_in",templateUrl:function(e){return e["ng-view"]="",Routes.new_user_session_path(e)},controller:"UsersSessionsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("new",e)}]}}).state("new_user_password_path",{url:"/users/password/new",templateUrl:function(e){return e["ng-view"]="",Routes.new_user_password_path(e)},controller:"DevisePasswordsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("new",e)}]}}).state("edit_user_password_path",{url:"/users/password/edit",templateUrl:function(e){return e["ng-view"]="",Routes.edit_user_password_path(e)},controller:"DevisePasswordsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("edit",e)}]}}).state("cancel_user_registration_path",{url:"/users/cancel",templateUrl:function(e){return e["ng-view"]="",Routes.cancel_user_registration_path(e)},controller:"DeviseRegistrationsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("cancel",e)}]}}).state("new_user_registration_path",{url:"/users/sign_up",templateUrl:function(e){return e["ng-view"]="",Routes.new_user_registration_path(e)},controller:"DeviseRegistrationsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("new",e)}]}}).state("edit_user_registration_path",{url:"/users/edit",templateUrl:function(e){return e["ng-view"]="",Routes.edit_user_registration_path(e)},controller:"DeviseRegistrationsCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("edit",e)}]}}).state("root_path",{url:"/",templateUrl:function(e){return e["ng-view"]="",Routes.root_path(e)},controller:"MainCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("index",e)}]}}).state("about_main_index_path",{url:"/main/about",templateUrl:function(e){return e["ng-view"]="",Routes.about_main_index_path(e)},controller:"MainCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("about",e)}]}}).state("gallery_main_index_path",{url:"/main/gallery",templateUrl:function(e){return e["ng-view"]="",Routes.gallery_main_index_path(e)},controller:"MainCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("gallery",e)}]}}).state("contacts_main_index_path",{url:"/main/contacts",templateUrl:function(e){return e["ng-view"]="",Routes.contacts_main_index_path(e)},controller:"MainCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("contacts",e)}]}}).state("main_index_path",{url:"/main",templateUrl:function(e){return e["ng-view"]="",Routes.main_index_path(e)},controller:"MainCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("index",e)}]}}).state("profile_index_path",{url:"/profile",templateUrl:function(e){return e["ng-view"]="",Routes.profile_index_path(e)},controller:"ProfileCtrl as ctrl",resolve:{action:["$stateParams",function(e){return n("index",e)}]}}),t}}]).config(["$provide",function(e){e.decorator("$state",["$delegate",function(e){var t=e;t.baseGo=t.go;var r=function(e,r,n){if(n=n||{},t.defaultParams){var o=angular.copy(t.defaultParams);r=angular.extend(o,r)}n.inherit=!1,t.baseGo(e,r,n)};return t.go=r,e}])}]),angular.module("oxymoron.config.debug",[]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1)}]),angular.module("oxymoron.config",["oxymoron.config.http","oxymoron.config.states","oxymoron.config.debug"]),angular.module("oxymoron.services.interceptor",[]).factory("httpInterceptor",["$q","$rootScope","$log",function(e,t){return{request:function(r){return t.$broadcast("loading:progress"),r||e.when(r)},response:function(r){return t.$broadcast("loading:finish",r),r||e.when(r)},responseError:function(r){return t.$broadcast("loading:error",r),e.reject(r)}}}]).config(["$httpProvider",function(e){e.interceptors.push("httpInterceptor")}]),angular.module("oxymoron.services.resources",[]).factory("resourceDecorator",[function(){return function(e){return e}}]),angular.module("oxymoron.services.sign",[]).service("Sign",["$http",function(e){var t=this;t.out=function(t){e["delete"](Routes.destroy_user_session_path()).success(function(){t&&t()})},t["in"]=function(t,r){e.post(Routes.user_session_path(),{user:t}).success(function(){r&&r()})},t.up=function(t,r){e.post(Routes.user_registration_path(),{user:t}).success(function(){r&&r()})}}]),angular.module("oxymoron.services.validate",[]).factory("Validate",[function(){return function(e,t){try{var r=angular.element(document.querySelector('[name="'+e+'"]')).scope()[e]}catch(n){r={}}angular.element(document.querySelectorAll(".rails-errors")).remove(),angular.forEach(r,function(e,t){0!=t.indexOf("$")&&angular.forEach(e.$error,function(t,r){e.$setValidity(r,null)})}),angular.forEach(t,function(t,o){var a=e+"["+o+"]";try{r[a]&&(r[a].$setTouched(),r[a].$setDirty(),r[a].$setValidity("server",!1)),angular.element(document.querySelector('[name="'+a+'"]')).parent().append('<div class="rails-errors" ng-messages="'+a+'.$error"><div ng-message="server">'+t[0]+"</div></div>")}catch(n){console.log(n),console.warn("Element with name "+a+" not found for validation.")}})}}]),angular.module("oxymoron.services.notice",[]).service("Notice",["ngNotify",function(e){this.callback=function(t,r){e.set(r.data.msg||r.data.error,t)}}]),angular.module("oxymoron.services",["oxymoron.services.interceptor","oxymoron.services.notice","oxymoron.services.resources","oxymoron.services.sign","oxymoron.services.validate"]),angular.module("oxymoron.directives.contentFor",[]).directive("contentFor",["$compile",function(e){return{compile:function(t){var r=t.html();return{pre:function(n,o,a){var i=angular.element(document.querySelectorAll('[ng-yield="'+a.contentFor+'"]'));return"true"==i.attr("only-text")&&(r=t.text().replace(/(?:\r\n|\r|\n)/g," ")),i.html((i.attr("prefix")||"")+r+(i.attr("postfix")||"")),e(i)(n),o.remove()}}}}}]),angular.module("oxymoron.directives.fileupload",[]).directive("fileupload",["$http","$timeout","$cookies","ngNotify",function(e,t,r,n){return{scope:{fileupload:"=",ngModel:"=",hash:"=",percentCompleted:"=",maxSize:"="},restrict:"A",link:function(e,t,o){e.percentCompleted=undefined,t.bind("change",function(){var a=!0;e.xhr&&e.xhr.abort();var i=new FormData;if(angular.forEach(t[0].files,function(t){e.maxSize&&t.size/1024/1024>e.maxSize?a=!1:i.append("attachments[]",t)}),!a)return n.set("File size is more then "+e.maxSize+" Mb","error"),!1;e.xhr=new XMLHttpRequest,e.percentCompleted=0,e.xhr.upload.onprogress=function(t){e.$apply(function(){t.lengthComputable&&(e.percentCompleted=Math.round(t.loaded/t.total*100))})},e.xhr.onload=function(){var t=JSON.parse(this.responseText);200==this.status?e.$apply(function(){e.hash?(e.ngModel=e.ngModel||{},angular.forEach(t,function(t,r){e.ngModel[r]=e.ngModel[r]||[],angular.forEach(t,function(t){e.ngModel[r].push(t)})})):o.multiple?(e.ngModel=e.ngModel||[],angular.forEach(t,function(t){e.ngModel.push(t)})):e.ngModel=t[0],e.percentCompleted=undefined}):n.set(t.msg||"Uploading error","error")},e.xhr.open("POST",e.fileupload),e.xhr.setRequestHeader("X-XSRF-Token",r.get("XSRF-TOKEN")),e.xhr.send(i),t[0].value=""})}}}]),angular.module("oxymoron.directives.clickOutside",[]).directive("clickOutside",["$document",function(e){return{restrict:"A",scope:{clickOutside:"&",clickOutsideIf:"="},link:function(t,r){var n=function(e){t.clickOutsideIf&&r!==e.target&&!r[0].contains(e.target)&&document.body.contains(e.target)&&t.$apply(function(){t.$eval(t.clickOutside)})};e.bind("click",n),t.$on("$destroy",function(){e.unbind("click",n)})}}}]),angular.module("oxymoron.directives",["oxymoron.directives.fileupload","oxymoron.directives.contentFor","oxymoron.directives.clickOutside"]),angular.module("oxymoron.notifier",[]).run(["$rootScope","ngNotify","Validate","$state","$http","$location","Notice",function(e,t,r,n,o,a,i){t.config({theme:"pure",position:"top",duration:2e3,type:"info"});var s=function(e,t){t.data&&angular.isObject(t.data)&&((t.data.msg||t.data.error)&&i.callback(e,t),t.data.errors&&r(t.data.form_name||t.config.data.form_name,t.data.errors),t.data.reload?t.data.redirect_to_url?window.location=t.data.redirect_to_url:t.data.redirect_to&&n.transitionTo(t.data.redirect_to,t.data.redirect_options||{},{notify:!1,location:!0,reload:!0}):t.data.redirect_to_url?a.url(t.data.redirect_to_url):t.data.redirect_to&&n.go(t.data.redirect_to,t.data.redirect_options||{}),t.data.reload&&window.location.reload())};e.$on("loading:finish",function(e,t){s("success",t)}),e.$on("loading:error",function(e,t){s("error",t)})}]),angular.module("oxymoron",["ngNotify","ngCookies","ui.router","ngResource","oxymoron.directives","oxymoron.services","oxymoron.config","oxymoron.notifier"])}).call(this),function(){var e=function(){var e=this,t={new_user_session:{defaults:{},path:"/users/sign_in"},user_session:{defaults:{},path:"/users/sign_in"},destroy_user_session:{defaults:{},path:"/users/sign_out"},new_user_password:{defaults:{},path:"/users/password/new"},edit_user_password:{defaults:{},path:"/users/password/edit"},user_password:{defaults:{},path:"/users/password"},cancel_user_registration:{defaults:{},path:"/users/cancel"},new_user_registration:{defaults:{},path:"/users/sign_up"},edit_user_registration:{defaults:{},path:"/users/edit"},user_registration:{defaults:{},path:"/users"},root:{defaults:{},path:"/"},about_main_index:{defaults:{},path:"/main/about"},gallery_main_index:{defaults:{},path:"/main/gallery"},contacts_main_index:{defaults:{},path:"/main/contacts"},main_index:{defaults:{},path:"/main"},profile_index:{defaults:{},path:"/profile"}};e.defaultParams={};var r=function(e,t){var n=[];for(var o in e)if(e.hasOwnProperty(o)){var a=t?t+"["+(Array.isArray(e)?"":o)+"]":o,i=e[o];n.push("object"==typeof i?r(i,a):encodeURIComponent(a)+"="+encodeURIComponent(i))}return n.join("&")},n=function(e,t){return delete(e=angular.copy(e))[t],e};angular.forEach(t,function(t,o){var a="",i=function(e){e.format&&(a+="."+e.format);e=n(e,"format");return angular.forEach(e,function(t,r){var o=":"+r;-1!=a.search(o)&&(a=a.replace(o,t),e=n(e,r))}),-1!=a.search(/\*\w+/)&&(a=a.replace(/\*(\w+)/,function(t,r){return e[r]})),Object.keys(e).length&&(a+="?"+r(e)),a};e[o+"_path"]=function(r){r=angular.extend(angular.copy(t.defaults),r||{});a=t.path;var n=angular.copy(e.defaultParams);return i(angular.extend(n,r))},e[o+"_url"]=function(t){return window.location.origin+e[o+"_path"](t)}})};window.Routes=new e}.call(this);